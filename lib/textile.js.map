{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f062ab15d058a7475925","webpack:///./src/index.js","webpack:///./src/merge.js","webpack:///./src/jsonml.js","webpack:///./src/html.js","webpack:///./src/re.js","webpack:///./src/ribbon.js","webpack:///./src/textile/flow.js","webpack:///./src/builder.js","webpack:///./src/fixlinks.js","webpack:///./src/textile/phrase.js","webpack:///./src/textile/attr.js","webpack:///./src/textile/glyph.js","webpack:///./src/textile/re_ext.js","webpack:///./src/textile/list.js","webpack:///./src/textile/deflist.js","webpack:///./src/textile/table.js"],"names":[],"mappings":"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","file":"textile.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"textile\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"textile\"] = factory();\n\telse\n\t\troot[\"textile\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f062ab15d058a7475925\n **/","/*\n** Textile parser for JavaScript\n**\n** Copyright (c) 2012 Borgar Ãžorsteinsson (MIT License).\n**\n*/\n\nconst merge = require( './merge' );\nconst { toHTML } = require( './jsonml' );\nconst { parseFlow } = require( './textile/flow' );\nconst { parseHtml } = require( './html' );\n\nfunction textile ( txt, opt ) {\n  // get a throw-away copy of options\n  opt = merge( merge({}, textile.defaults ), opt || {});\n  // run the converter\n  return parseFlow( txt, opt ).map( toHTML ).join( '' );\n};\nmodule.exports = textile;\n\n// options\ntextile.defaults = {\n  // single-line linebreaks are converted to <br> by default\n  'breaks': true\n};\ntextile.setOptions = textile.setoptions = function ( opt ) {\n  merge( textile.defaults, opt );\n  return this;\n};\n\ntextile.parse = textile.convert = textile;\ntextile.html_parser = parseHtml;\n\ntextile.jsonml = function ( txt, opt ) {\n  // get a throw-away copy of options\n  opt = merge( merge({}, textile.defaults ), opt || {});\n  // parse and return tree\n  return [ 'html' ].concat( parseFlow( txt, opt ) );\n};\ntextile.serialize = toHTML;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","// merge object b properties into object a\nmodule.exports = function merge ( a, b ) {\n  if ( b ) {\n    for ( const k in b ) {\n      a[ k ] = b[ k ];\n    }\n  }\n  return a;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/merge.js\n **/","/*\n** JSONML helper methods - http://www.jsonml.org/\n**\n** This provides the `JSONML` object, which contains helper\n** methods for rendering JSONML to HTML.\n**\n** Note that the tag ! is taken to mean comment, this is however\n** not specified in the JSONML spec.\n*/\n\nconst singletons = require( './html' ).singletons;\n\n// drop or add tab levels to JsonML tree\nfunction reIndent ( ml, shiftBy ) {\n  // a bit obsessive, but there we are...\n  if ( !shiftBy ) {\n    return ml;\n  }\n  return ml.map( function ( s ) {\n    if ( /^\\n\\t+/.test( s ) ) {\n      if ( shiftBy < 0 ) {\n        s = s.slice( 0, shiftBy );\n      }\n      else {\n        for ( let i = 0; i < shiftBy; i++ ) {\n          s += '\\t';\n        }\n      }\n    }\n    else if ( Array.isArray( s ) ) {\n      return reIndent( s, shiftBy );\n    }\n    return s;\n  });\n}\n\nfunction escape ( text, escapeQuotes ) {\n  return text.replace( /&(?!(#\\d{2,}|#x[\\da-fA-F]{2,}|[a-zA-Z][a-zA-Z1-4]{1,6});)/g, '&amp;' )\n             .replace( /</g, '&lt;' )\n             .replace( />/g, '&gt;' )\n             .replace( /\"/g, escapeQuotes ? '&quot;' : '\"' )\n             .replace( /'/g, escapeQuotes ? '&#39;' : \"'\" );\n}\n\nfunction toHTML ( jsonml ) {\n  jsonml = jsonml.concat();\n\n  // basic case\n  if ( typeof jsonml === 'string' ) {\n    return escape( jsonml );\n  }\n\n  const tag = jsonml.shift();\n  let attributes = {};\n  let tagAttrs = '';\n  const content = [];\n\n  if ( jsonml.length && typeof jsonml[0] === 'object' && !Array.isArray( jsonml[0] ) ) {\n    attributes = jsonml.shift();\n  }\n\n  while ( jsonml.length ) {\n    content.push( toHTML( jsonml.shift() ) );\n  }\n\n  for ( const a in attributes ) {\n    tagAttrs += ( attributes[a] == null )\n            ? ` ${ a }`\n            : ` ${ a }=\"${ escape( String( attributes[a] ), true ) }\"`;\n  }\n\n  // be careful about adding whitespace here for inline elements\n  if ( tag === '!' ) {\n    return `<!--${ content.join( '' ) }-->`;\n  }\n  else if ( tag in singletons ) {\n    return `<${ tag }${ tagAttrs } />`;\n  }\n  else {\n    return `<${ tag }${ tagAttrs }>${ content.join( '' ) }</${ tag }>`;\n  }\n}\n\nmodule.exports = {\n  reIndent: reIndent,\n  toHTML: toHTML,\n  escape: escape\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/jsonml.js\n **/","const re = require( './re' );\nconst ribbon = require( './ribbon' );\n\nre.pattern.html_id = '[a-zA-Z][a-zA-Z\\\\d:]*';\nre.pattern.html_attr = '(?:\"[^\"]+\"|\\'[^\\']+\\'|[^>\\\\s]+)';\n\nconst reAttr = re.compile( /^\\s*([^=\\s]+)(?:\\s*=\\s*(\"[^\"]+\"|'[^']+'|[^>\\s]+))?/ );\nconst reComment = re.compile( /^<!--(.+?)-->/, 's' );\nconst reEndTag = re.compile( /^<\\/([:html_id:])([^>]*)>/ );\nconst reTag = re.compile( /^<([:html_id:])((?:\\s[^=\\s\\/]+(?:\\s*=\\s*[:html_attr:])?)+)?\\s*(\\/?)>(\\n*)/ );\nconst reHtmlTagBlock = re.compile( /^\\s*<([:html_id:](?::[a-zA-Z\\d]+)*)((?:\\s[^=\\s\\/]+(?:\\s*=\\s*[:html_attr:])?)+)?\\s*(\\/?)>(\\n*)/ );\n\n// area, base, basefont, bgsound, br, col, command, embed, frame, hr,\n// img, input, keygen, link, meta, param, source, track or wbr\nconst singletons = {\n  br: 1,\n  hr: 1,\n  img: 1,\n  link: 1,\n  meta: 1,\n  wbr: 1,\n  area: 1,\n  param: 1,\n  input: 1,\n  option: 1,\n  base: 1,\n  col: 1\n};\n\nfunction allowAll () {\n  return true;\n}\n\nfunction testComment ( src ) {\n  return reComment.exec( src );\n}\n\nfunction testOpenTagBlock ( src ) {\n  return reHtmlTagBlock.exec( src );\n}\n\nfunction testOpenTag ( src ) {\n  return reTag.exec( src );\n}\n\nfunction testCloseTag ( src ) {\n  return reEndTag.exec( src );\n}\n\nfunction parseHtmlAttr ( attrSrc ) {\n  // parse ATTR and add to element\n  const attr = {};\n  let m;\n  while ( ( m = reAttr.exec( attrSrc ) ) ) {\n    attr[ m[1] ] = ( typeof m[2] === 'string' ) ? m[2].replace( /^([\"'])(.*)\\1$/, '$2' ) : null;\n    attrSrc = attrSrc.slice( m[0].length );\n  }\n  return attr;\n}\n\n// This \"indesciminately\" parses HTML text into a list of JSON-ML element\n// No steps are taken however to prevent things like <table><p><td> - user can still create nonsensical but \"well-formed\" markup\nfunction parseHtml ( src, whitelistTags ) {\n  const root = [];\n  let list = root;\n  const _stack = [];\n  const oktag = whitelistTags ? function ( tag ) { return tag in whitelistTags; } : allowAll;\n  let m;\n  let tag;\n\n  src = ( typeof src === 'string' ) ? ribbon( src ) : src;\n  // loop\n  do {\n    // comment\n    if ( ( m = testComment( src ) ) && oktag( '!' ) ) {\n      src.advance( m[0] );\n      list.push( [ '!', m[1] ] );\n    }\n\n    // end tag\n    else if ( ( m = testCloseTag( src ) ) && oktag( m[1] ) ) {\n      tag = m[1];\n      if ( _stack.length ) {\n        for ( let i = _stack.length - 1; i >= 0; i-- ) {\n          const head = _stack[i];\n          if ( head[0] === tag ) {\n            _stack.splice( i );\n            list = _stack[_stack.length - 1] || root;\n            break;\n          }\n        }\n      }\n      src.advance( m[0] );\n    }\n\n    // open/void tag\n    else if ( ( m = testOpenTag( src ) ) && oktag( m[1] ) ) {\n      src.advance( m[0] );\n      tag = m[1];\n      const single = m[3] || m[1] in singletons;\n      const tail = m[4];\n      const element = [ tag ];\n\n      // attributes\n      if ( m[2] ) {\n        element.push( parseHtmlAttr( m[2] ) );\n      }\n\n      // single tag\n      if ( single ) {\n        // let us add the element and continue our quest...\n        list.push( element );\n        if ( tail ) {\n          list.push( tail );\n        }\n      }\n      // open tag\n      else {\n        if ( tail ) {\n          element.push( tail );\n        }\n\n        // TODO: some things auto close other things: <td>, <li>, <p>, <table>\n        // if ( tag === 'p' && _stack.length ) {\n        //   var seek = /^(p)$/;\n        //   for (var i=_stack.length-1; i>=0; i--) {\n        //     var head = _stack[i];\n        //     if ( seek.test( head[0] ) /* === tag */ ) {\n        //       //src.advance( m[0] );\n        //       _stack.splice( i );\n        //       list = _stack[i] || root;\n        //     }\n        //   }\n        // }\n\n        // TODO: some elements can move parser into \"text\" mode\n        // style, xmp, iframe, noembed, noframe, textarea, title, script, noscript, plaintext\n        // if ( /^(script)$/.test( tag ) ) { }\n\n        _stack.push( element );\n        list.push( element );\n        list = element;\n      }\n    }\n    // text content\n    else {\n      // no match, move by all \"uninteresting\" chars\n      m = /([^<]+|[^\\0])/.exec( src );\n      if ( m ) {\n        list.push( m[0] );\n      }\n      src.advance( m ? m[0].length || 1 : 1 );\n    }\n  }\n  while ( src.valueOf() );\n\n  return root;\n}\n\nmodule.exports = {\n  singletons: singletons,\n  parseHtml: parseHtml,\n  parseHtmlAttr: parseHtmlAttr,\n  testCloseTag: testCloseTag,\n  testOpenTagBlock: testOpenTagBlock,\n  testOpenTag: testOpenTag,\n  testComment: testComment\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/html.js\n **/","/*\n** Regular Expression helper methods\n**\n** This provides the `re` object, which contains several helper\n** methods for working with big regular expressions (soup).\n**\n*/\n\nconst _cache = {};\n\nconst re = module.exports = {\n\n  pattern: {\n    'punct': '[!-/:-@\\\\[\\\\\\\\\\\\]-`{-~]',\n    'space': '\\\\s'\n  },\n\n  escape: function ( src ) {\n    return src.replace( /[\\-\\[\\]\\{\\}\\(\\)\\*\\+\\?\\.,\\\\\\^\\$\\|#\\s]/g, '\\\\$&' );\n  },\n\n  collapse: function ( src ) {\n    return src.replace( /(?:#.*?(?:\\n|$))/g, '' )\n              .replace( /\\s+/g, '' );\n  },\n\n  expandPatterns: function ( src ) {\n    // TODO: provide escape for patterns: \\[:pattern:] ?\n    return src.replace( /\\[:\\s*(\\w+)\\s*:\\]/g, function ( m, k ) {\n      const ex = re.pattern[k];\n      if ( ex ) {\n        return re.expandPatterns( ex );\n      }\n      else {\n        throw new Error( 'Pattern ' + m + ' not found in ' + src );\n      }\n    });\n  },\n\n  isRegExp: function ( r ) {\n    return Object.prototype.toString.call( r ) === '[object RegExp]';\n  },\n\n  compile: function ( src, flags ) {\n    if ( re.isRegExp( src ) ) {\n      if ( arguments.length === 1 ) { // no flags arg provided, use the RegExp one\n        flags = ( src.global ? 'g' : '' ) +\n                ( src.ignoreCase ? 'i' : '' ) +\n                ( src.multiline ? 'm' : '' );\n      }\n      src = src.source;\n    }\n    // don't do the same thing twice\n    const ckey = src + ( flags || '' );\n    if ( ckey in _cache ) {\n      return _cache[ ckey ];\n    }\n    // allow classes\n    let rx = re.expandPatterns( src );\n    // allow verbose expressions\n    if ( flags && /x/.test( flags ) ) {\n      rx = re.collapse( rx );\n    }\n    // allow dotall expressions\n    if ( flags && /s/.test( flags ) ) {\n      rx = rx.replace( /([^\\\\])\\./g, '$1[^\\\\0]' );\n    }\n    // TODO: test if MSIE and add replace \\s with [\\s\\u00a0] if it is?\n    // clean flags and output new regexp\n    flags = ( flags || '' ).replace( /[^gim]/g, '' );\n    return ( _cache[ ckey ] = new RegExp( rx, flags ) );\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/re.js\n **/","module.exports = function ribbon ( feed ) {\n  const org = String( feed );\n  let slot = null;\n  let pos = 0;\n\n  return {\n\n    save: function () {\n      slot = pos;\n    },\n\n    load: function () {\n      pos = slot;\n      feed = org.slice( pos );\n      this.$ = feed;\n    },\n\n    advance: function ( n ) {\n      pos += ( typeof n === 'string' ) ? n.length : n;\n      feed = org.slice( pos );\n      this.$ = feed;\n      return feed;\n    },\n\n    lookbehind: function ( nchars ) {\n      nchars = nchars == null ? 1 : nchars;\n      return org.slice( pos - nchars, pos );\n    },\n\n    startsWith: function ( s ) {\n      return feed.substring( 0, s.length ) === s;\n    },\n\n    valueOf: function () {\n      this.$ = feed;\n      return feed;\n    },\n\n    toString: function () {\n      this.$ = feed;\n      return feed;\n    }\n\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ribbon.js\n **/","/*\n** textile flow content parser\n*/\nconst builder = require( '../builder' );\nconst ribbon = require( '../ribbon' );\nconst re = require( '../re' );\nconst fixLinks = require( '../fixlinks' );\n\nconst { parseHtml, parseHtmlAttr, singletons, testComment, testOpenTagBlock } = require( '../html' );\n\nconst { parsePhrase } = require( './phrase' );\nconst { copyAttr, parseAttr } = require( './attr' );\nconst { testList, parseList } = require( './list' );\nconst { testDefList, parseDefList } = require( './deflist' );\nconst { testTable, parseTable } = require( './table' );\n\nconst { txblocks, txlisthd, txattr } = require( './re_ext' );\nre.pattern.txblocks = txblocks;\nre.pattern.txlisthd = txlisthd;\nre.pattern.txattr = txattr;\n\n// HTML tags allowed in the document (root) level that trigger HTML parsing\nconst allowedBlocktags = {\n  'p': 0,\n  'hr': 0,\n  'ul': 1,\n  'ol': 0,\n  'li': 0,\n  'div': 1,\n  'pre': 0,\n  'object': 1,\n  'script': 0,\n  'noscript': 0,\n  'blockquote': 1,\n  'notextile': 1\n};\n\nconst reBlock = re.compile( /^([:txblocks:])/ );\n// const reBlockSE = re.compile( /^[:txblocks:]$/ );\nconst reBlockNormal = re.compile( /^(.*?)($|\\r?\\n(?=[:txlisthd:])|\\r?\\n(?:\\s*\\n|$)+)/, 's' );\nconst reBlockExtended = re.compile( /^(.*?)($|\\r?\\n(?=[:txlisthd:])|\\r?\\n+(?=[:txblocks:][:txattr:]\\.))/, 's' );\nconst reRuler = /^(\\-\\-\\-+|\\*\\*\\*+|___+)(\\r?\\n\\s+|$)/;\nconst reLinkRef = re.compile( /^\\[([^\\]]+)\\]((?:https?:\\/\\/|\\/)\\S+)(?:\\s*\\n|$)/ );\nconst reFootnoteDef = /^fn\\d+$/;\n\nfunction paragraph ( s, tag, pba, linebreak, options ) {\n  tag = tag || 'p';\n  let out = [];\n  s.split( /(?:\\r?\\n){2,}/ ).forEach( function ( bit, i ) {\n    if ( tag === 'p' && /^\\s/.test( bit ) ) {\n      // no-paragraphs\n      // WTF?: Why does Textile not allow linebreaks in spaced lines\n      bit = bit.replace( /\\r?\\n[\\t ]/g, ' ' ).trim();\n      out = out.concat( parsePhrase( bit, options ) );\n    }\n    else {\n      if ( linebreak && i ) { out.push( linebreak ); }\n      out.push( pba ? [ tag, pba ].concat( parsePhrase( bit, options ) )\n                    : [ tag ].concat( parsePhrase( bit, options ) ) );\n    }\n  });\n  return out;\n};\n\nfunction parseFlow ( src, options ) {\n  const list = builder();\n\n  let linkRefs;\n  let m;\n\n  src = ribbon( src.replace( /^( *\\r?\\n)+/, '' ) );\n\n  // loop\n  while ( src.valueOf() ) {\n    src.save();\n\n    // link_ref -- this goes first because it shouldn't trigger a linebreak\n    if ( ( m = reLinkRef.exec( src ) ) ) {\n      if ( !linkRefs ) { linkRefs = {}; }\n      src.advance( m[0] );\n      linkRefs[m[1]] = m[2];\n      continue;\n    }\n\n    // add linebreak\n    list.linebreak();\n\n    // named block\n    if ( ( m = reBlock.exec( src ) ) ) {\n      src.advance( m[0] );\n      const blockType = m[0];\n      let pba = parseAttr( src, blockType );\n\n      if ( pba ) {\n        src.advance( pba[0] );\n        pba = pba[1];\n      }\n      if ( ( m = /^\\.(\\.?)(?:\\s|(?=:))/.exec( src ) ) ) {\n        // FIXME: this whole copyAttr seems rather strange?\n        // slurp rest of block\n        const extended = !!m[1];\n        const reBlockGlob = ( extended ? reBlockExtended : reBlockNormal );\n        m = reBlockGlob.exec( src.advance( m[0] ) );\n        src.advance( m[0] );\n        // bq | bc | notextile | pre | h# | fn# | p | ###\n        if ( blockType === 'bq' ) {\n          let inner = m[1];\n          if ( ( m = /^:(\\S+)\\s+/.exec( inner ) ) ) {\n            if ( !pba ) { pba = {}; }\n            pba.cite = m[1];\n            inner = inner.slice( m[0].length );\n          }\n          // RedCloth adds all attr to both: this is bad because it produces duplicate IDs\n          const par = paragraph( inner, 'p', copyAttr( pba, { 'cite': 1, 'id': 1 }), '\\n', options );\n          list.add( [ 'blockquote', pba, '\\n' ].concat( par ).concat( [ '\\n' ] ) );\n          // FIXME: looks like .linebreak can work here\n        }\n        else if ( blockType === 'bc' ) {\n          const subPba = ( pba ) ? copyAttr( pba, { 'id': 1 }) : null;\n          list.add( [ 'pre', pba, ( subPba ? [ 'code', subPba, m[1] ] : [ 'code', m[1] ] ) ] );\n        }\n        else if ( blockType === 'notextile' ) {\n          list.merge( parseHtml( m[1] ) );\n        }\n        else if ( blockType === '###' ) {\n          // ignore the insides\n        }\n        else if ( blockType === 'pre' ) {\n          // I disagree with RedCloth, but agree with PHP here:\n          // \"pre(foo#bar).. line1\\n\\nline2\" prevents multiline preformat blocks\n          // ...which seems like the whole point of having an extended pre block?\n          list.add( [ 'pre', pba, m[1] ] );\n        }\n        else if ( reFootnoteDef.test( blockType ) ) { // footnote\n          // Need to be careful: RedCloth fails \"fn1(foo#m). footnote\" -- it confuses the ID\n          const fnid = blockType.replace( /\\D+/g, '' );\n          if ( !pba ) { pba = {}; }\n          pba.class = ( pba['class'] ? pba['class'] + ' ' : '' ) + 'footnote';\n          pba.id = 'fn' + fnid;\n          list.add( [ 'p', pba, [ 'a', { 'href': '#fnr' + fnid }, [ 'sup', fnid ] ], ' ' ]\n                      .concat( parsePhrase( m[1], options ) ) );\n        }\n        else { // heading | paragraph\n          list.merge( paragraph( m[1], blockType, pba, '\\n', options ) );\n        }\n        continue;\n      }\n      else {\n        src.load();\n      }\n    }\n\n    // HTML comment\n    if ( ( m = testComment( src ) ) ) {\n      src.advance( m[0] + ( /(?:\\s*\\n+)+/.exec( src ) || [] )[0] );\n      list.add( [ '!', m[1] ] );\n      continue;\n    }\n\n    // block HTML\n    if ( ( m = testOpenTagBlock( src ) ) ) {\n      const tag = m[1];\n      const single = m[3] || tag in singletons;\n      const tail = m[4];\n\n      // Unsurprisingly, all Textile implementations I have tested have trouble parsing simple HTML:\n      //\n      //    \"<div>a\\n<div>b\\n</div>c\\n</div>d\"\n      //\n      // I simply match them here as there is no way anyone is using nested HTML today, or if they\n      // are, then this will at least output less broken HTML as redundant tags will get quoted.\n\n      // Is block tag? ...\n      if ( tag in allowedBlocktags ) {\n        src.advance( m[0] );\n\n        let element = [ tag ];\n\n        if ( m[2] ) {\n          element.push( parseHtmlAttr( m[2] ) );\n        }\n\n        // single tag\n        if ( single ) {\n          // let us add the element and continue our quest...\n          list.add( element );\n          continue;\n        }\n        // block\n        else {\n          // gulp up the rest of this block...\n          const reEndTag = re.compile( `^(.*?)(\\\\s*)(</${ tag }\\\\s*>)(\\\\s*)`, 's' );\n          if ( ( m = reEndTag.exec( src ) ) ) {\n            src.advance( m[0] );\n            if ( tag === 'pre' ) {\n              element.push( tail );\n              element = element.concat( parseHtml( m[1].replace( /(\\r?\\n)+$/, '' ), { 'code': 1 }) );\n              if ( m[2] ) { element.push( m[2] ); }\n              list.add( element );\n            }\n            else if ( tag === 'notextile' ) {\n              element = parseHtml( m[1].trim() );\n              list.merge( element );\n            }\n            else if ( tag === 'script' || tag === 'noscript' ) {\n              element.push( tail + m[1] );\n              list.add( element );\n            }\n            else {\n              // These strange (and unnecessary) linebreak tests are here to get the\n              // tests working perfectly. In reality, this doesn't matter one bit.\n              if ( /\\n/.test( tail ) ) { element.push( '\\n' ); }\n              if ( /\\n/.test( m[1] ) ) {\n                element = element.concat( parseFlow( m[1], options ) );\n              }\n              else {\n                element = element.concat( parsePhrase( m[1].replace( /^ +/, '' ), options ) );\n              }\n              if ( /\\n/.test( m[2] ) ) { element.push( '\\n' ); }\n\n              list.add( element );\n            }\n            continue;\n          }\n        }\n      }\n      src.load();\n    }\n\n    // ruler\n    if ( ( m = reRuler.exec( src ) ) ) {\n      src.advance( m[0] );\n      list.add( [ 'hr' ] );\n      continue;\n    }\n\n    // list\n    if ( ( m = testList( src ) ) ) {\n      src.advance( m[0] );\n      list.add( parseList( m[0], options ) );\n      continue;\n    }\n\n    // definition list\n    if ( ( m = testDefList( src ) ) ) {\n      src.advance( m[0] );\n      list.add( parseDefList( m[0], options ) );\n      continue;\n    }\n\n    // table\n    if ( ( m = testTable( src ) ) ) {\n      src.advance( m[0] );\n      list.add( parseTable( m[1], options ) );\n      continue;\n    }\n\n    // paragraph\n    m = reBlockNormal.exec( src );\n    list.merge( paragraph( m[1], 'p', undefined, '\\n', options ) );\n    src.advance( m[0] );\n  }\n\n  return linkRefs ? fixLinks( list.get(), linkRefs ) : list.get();\n}\n\nexports.parseFlow = parseFlow;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/textile/flow.js\n **/","module.exports = function builder ( initArr ) {\n  const arr = Array.isArray( initArr ) ? initArr : [];\n\n  return {\n    add: function ( node ) {\n      if ( typeof node === 'string' &&\n           typeof arr[ arr.length - 1 ] === 'string' ) {\n        // join if possible\n        arr[ arr.length - 1 ] += node;\n      }\n      else if ( Array.isArray( node ) ) {\n        arr.push( node.filter( s => s !== undefined ) );\n      }\n      else if ( node ) {\n        arr.push( node );\n      }\n      return this;\n    },\n\n    merge: function ( arr ) {\n      for ( let i = 0, l = arr.length; i < l; i++ ) {\n        this.add( arr[i] );\n      }\n      return this;\n    },\n\n    linebreak: function () {\n      if ( arr.length ) {\n        this.add( '\\n' );\n      }\n    },\n\n    get: function () {\n      return arr;\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/builder.js\n **/","// recurse the tree and swap out any \"href\" attributes\n// this uses the context as the replace dictionary so it can be fed to Array#map\nmodule.exports = function fixLinks ( ml, dict ) {\n  if ( Array.isArray( ml ) ) {\n    if ( ml[0] === 'a' ) { // found a link\n      const attr = ml[1];\n      if ( typeof attr === 'object' && 'href' in attr && attr.href in dict ) {\n        attr.href = dict[attr.href];\n      }\n    }\n    for ( let i = 0, l = ml.length; i < l; i++ ) {\n      if ( Array.isArray( ml[i] ) ) {\n        fixLinks( ml[i], dict );\n      }\n    }\n  }\n  return ml;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/fixlinks.js\n **/","/* textile inline parser */\n\nconst ribbon = require( '../ribbon' );\nconst builder = require( '../builder' );\nconst re = require( '../re' );\n\nconst { parseAttr } = require( './attr' );\nconst { parseGlyph } = require( './glyph' );\nconst { parseHtmlAttr, singletons, testComment, testOpenTag } = require( '../html' );\n\nconst { ucaps, txattr, txcite } = require( './re_ext' );\nre.pattern.txattr = txattr;\nre.pattern.txcite = txcite;\nre.pattern.ucaps = ucaps;\n\nconst phraseConvert = {\n  '*': 'strong',\n  '**': 'b',\n  '??': 'cite',\n  '_': 'em',\n  '__': 'i',\n  '-': 'del',\n  '%': 'span',\n  '+': 'ins',\n  '~': 'sub',\n  '^': 'sup',\n  '@': 'code'\n};\n\nconst rePhrase = /^([\\[\\{]?)(__?|\\*\\*?|\\?\\?|[\\-\\+\\^~@%])/;\nconst reImage = re.compile( /^!(?!\\s)([:txattr:](?:\\.[^\\n\\S]|\\.(?:[^\\.\\/]))?)([^!\\s]+?) ?(?:\\(((?:[^\\(\\)]|\\([^\\(\\)]+\\))+)\\))?!(?::([^\\s]+?(?=[!-\\.:-@\\[\\\\\\]-`{-~](?:$|\\s)|\\s|$)))?/ );\nconst reImageFenced = re.compile( /^\\[!(?!\\s)([:txattr:](?:\\.[^\\n\\S]|\\.(?:[^\\.\\/]))?)([^!\\s]+?) ?(?:\\(((?:[^\\(\\)]|\\([^\\(\\)]+\\))+)\\))?!(?::([^\\s]+?(?=[!-\\.:-@\\[\\\\\\]-`{-~](?:$|\\s)|\\s|$)))?\\]/ );\n// NB: there is an exception in here to prevent matching \"TM)\"\nconst reCaps = re.compile( /^((?!TM\\)|tm\\))[[:ucaps:]](?:[[:ucaps:]\\d]{1,}(?=\\()|[[:ucaps:]\\d]{2,}))(?:\\((.*?)\\))?(?=\\W|$)/ );\nconst reLink = re.compile( /^\"(?!\\s)((?:[^\\n\"]|\"(?![\\s:])[^\\n\"]+\"(?!:))+)\"[:txcite:]/ );\nconst reLinkFenced = /^\\[\"([^\\n]+?)\":((?:\\[[a-z0-9]*\\]|[^\\]])+)\\]/;\nconst reLinkTitle = /\\s*\\(((?:\\([^\\(\\)]*\\)|[^\\(\\)])+)\\)$/;\nconst reFootnote = /^\\[(\\d+)(!?)\\]/;\n\nfunction parsePhrase ( src, options ) {\n  src = ribbon( src );\n\n  const list = builder();\n  let m;\n  let pba;\n\n  // loop\n  do {\n    src.save();\n\n    // linebreak -- having this first keeps it from messing to much with other phrases\n    if ( src.startsWith( '\\r\\n' ) ) {\n      src.advance( 1 ); // skip cartridge returns\n    }\n    if ( src.startsWith( '\\n' ) ) {\n      src.advance( 1 );\n      if ( options.breaks ) {\n        list.add( [ 'br' ] );\n      }\n      list.add( '\\n' );\n      continue;\n    }\n\n    // inline notextile\n    if ( ( m = /^==(.*?)==/.exec( src ) ) ) {\n      src.advance( m[0] );\n      list.add( m[1] );\n      continue;\n    }\n\n    // lookbehind => /([\\s>.,\"'?!;:])$/\n    const behind = src.lookbehind( 1 );\n    const boundary = !behind || /^[\\s>.,\"'?!;:()]$/.test( behind );\n    // FIXME: need to test right boundary for phrases as well\n    if ( ( m = rePhrase.exec( src ) ) && ( boundary || m[1] ) ) {\n      src.advance( m[0] );\n      const tok = m[2];\n      const fence = m[1];\n      const phraseType = phraseConvert[tok];\n      const code = phraseType === 'code';\n\n      if ( ( pba = !code && parseAttr( src, phraseType, tok ) ) ) {\n        src.advance( pba[0] );\n        pba = pba[1];\n      }\n      // FIXME: if we can't match the fence on the end, we should output fence-prefix as normal text\n      // seek end\n      let mMid;\n      let mEnd;\n      if ( fence === '[' ) {\n        mMid = '^(.*?)';\n        mEnd = '(?:])';\n      }\n      else if ( fence === '{' ) {\n        mMid = '^(.*?)';\n        mEnd = '(?:})';\n      }\n      else {\n        const t1 = re.escape( tok.charAt( 0 ) );\n        mMid = ( code ) ? '^(\\\\S+|\\\\S+.*?\\\\S)'\n                        : `^([^\\\\s${ t1 }]+|[^\\\\s${ t1 }].*?\\\\S(${ t1 }*))`;\n        mEnd = '(?=$|[\\\\s.,\"\\'!?;:()Â«Â»â€žâ€œâ€â€šâ€˜â€™])';\n      }\n      const rx = re.compile( `${ mMid }(${ re.escape( tok ) })${ mEnd }` );\n      if ( ( m = rx.exec( src ) ) && m[1] ) {\n        src.advance( m[0] );\n        if ( code ) {\n          list.add( [ phraseType, m[1] ] );\n        }\n        else {\n          list.add( [ phraseType, pba ].concat( parsePhrase( m[1], options ) ) );\n        }\n        continue;\n      }\n      // else\n      src.load();\n    }\n\n    // image\n    if ( ( m = reImage.exec( src ) ) || ( m = reImageFenced.exec( src ) ) ) {\n      src.advance( m[0] );\n\n      pba = m[1] && parseAttr( m[1], 'img' );\n      const attr = pba ? pba[1] : { 'src': '' };\n      let img = [ 'img', attr ];\n      attr.src = m[2];\n      attr.alt = m[3] ? ( attr.title = m[3] ) : '';\n\n      if ( m[4] ) { // +cite causes image to be wraped with a link (or link_ref)?\n        // TODO: support link_ref for image cite\n        img = [ 'a', { 'href': m[4] }, img ];\n      }\n      list.add( img );\n      continue;\n    }\n\n    // html comment\n    if ( ( m = testComment( src ) ) ) {\n      src.advance( m[0] );\n      list.add( [ '!', m[1] ] );\n      continue;\n    }\n    // html tag\n    // TODO: this seems to have a lot of overlap with block tags... DRY?\n    if ( ( m = testOpenTag( src ) ) ) {\n      src.advance( m[0] );\n      const tag = m[1];\n      const single = m[3] || m[1] in singletons;\n      let element = [ tag ];\n      const tail = m[4];\n      if ( m[2] ) {\n        element.push( parseHtmlAttr( m[2] ) );\n      }\n      if ( single ) { // single tag\n        list.add( element ).add( tail );\n        continue;\n      }\n      else { // need terminator\n        // gulp up the rest of this block...\n        const reEndTag = re.compile( `^(.*?)(</${ tag }\\\\s*>)`, 's' );\n        if ( ( m = reEndTag.exec( src ) ) ) {\n          src.advance( m[0] );\n          if ( tag === 'code' ) {\n            element.push( tail, m[1] );\n          }\n          else if ( tag === 'notextile' ) {\n            list.merge( parsePhrase( m[1], options ) );\n            continue;\n          }\n          else {\n            element = element.concat( parsePhrase( m[1], options ) );\n          }\n          list.add( element );\n          continue;\n        }\n        // end tag is missing, treat tag as normal text...\n      }\n      src.load();\n    }\n\n    // footnote\n    if ( ( m = reFootnote.exec( src ) ) && /\\S/.test( behind ) ) {\n      src.advance( m[0] );\n      list.add( [ 'sup', { 'class': 'footnote', 'id': 'fnr' + m[1] },\n                  ( m[2] === '!' ? m[1] // \"!\" suppresses the link\n                                 : [ 'a', { href: '#fn' + m[1] }, m[1] ] )\n                ] );\n      continue;\n    }\n\n    // caps / abbr\n    if ( ( m = reCaps.exec( src ) ) ) {\n      src.advance( m[0] );\n      let caps = [ 'span', { 'class': 'caps' }, m[1] ];\n      if ( m[2] ) {\n        // FIXME: use <abbr>, not acronym!\n        caps = [ 'acronym', { 'title': m[2] }, caps ];\n      }\n      list.add( caps );\n      continue;\n    }\n\n    // links\n    if ( ( boundary && ( m = reLink.exec( src ) ) ) ||\n                       ( m = reLinkFenced.exec( src ) ) ) {\n      src.advance( m[0] );\n      let title = m[1].match( reLinkTitle );\n      let inner = ( title ) ? m[1].slice( 0, m[1].length - title[0].length ) : m[1];\n      if ( ( pba = parseAttr( inner, 'a' ) ) ) {\n        inner = inner.slice( pba[0] );\n        pba = pba[1];\n      }\n      else {\n        pba = {};\n      }\n      if ( title && !inner ) {\n        inner = title[0];\n        title = '';\n      }\n      pba.href = m[2];\n      if ( title ) { pba.title = title[1]; }\n      list.add( [ 'a', pba ].concat( parsePhrase( inner.replace( /^(\\.?\\s*)/, '' ), options ) ) );\n      continue;\n    }\n\n    // no match, move by all \"uninteresting\" chars\n    m = /([a-zA-Z0-9,.':]+|[ \\f\\r\\t\\v\\xA0\\u2028\\u2029]+|[^\\0])/.exec( src );\n    if ( m ) {\n      list.add( m[0] );\n    }\n    src.advance( m ? m[0].length || 1 : 1 );\n  }\n  while ( src.valueOf() );\n\n  return list.get().map( parseGlyph );\n}\n\nexports.parsePhrase = parsePhrase;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/textile/phrase.js\n **/","const reClassid = /^\\(([^\\(\\)\\n]+)\\)/;\nconst rePaddingL = /^(\\(+)/;\nconst rePaddingR = /^(\\)+)/;\nconst reAlignBlock = /^(<>|<|>|=)/;\nconst reAlignImg = /^(<|>|=)/;\nconst reVAlign = /^(~|\\^|\\-)/;\nconst reColSpan = /^\\\\(\\d+)/;\nconst reRowSpan = /^\\/(\\d+)/;\nconst reStyles = /^\\{([^\\}]*)\\}/;\nconst reCSS = /^\\s*([^:\\s]+)\\s*:\\s*(.+)\\s*$/;\nconst reLang = /^\\[([^\\[\\]\\n]+)\\]/;\n\nconst pbaAlignLookup = {\n  '<': 'left',\n  '=': 'center',\n  '>': 'right',\n  '<>': 'justify'\n};\n\nconst pbaVAlignLookup = {\n  '~': 'bottom',\n  '^': 'top',\n  '-': 'middle'\n};\n\nfunction copyAttr ( s, blacklist ) {\n  if ( !s ) { return undefined; }\n  const d = {};\n  for ( const k in s ) {\n    if ( k in s && ( !blacklist || !( k in blacklist ) ) ) {\n      d[ k ] = s[ k ];\n    }\n  }\n  return d;\n}\n\nfunction testBlock ( name ) {\n  // \"in\" test would be better but what about fn#.?\n  return /^(?:table|t[dh]|t(?:foot|head|body)|b[qc]|div|notextile|pre|h[1-6]|fn\\\\d+|p|###)$/.test( name );\n}\n\n/*\n  The attr bit causes massive problems for span elements when parentheses are used.\n  Parentheses are a total mess and, unsurprisingly, cause trip-ups:\n\n   RC: `_{display:block}(span) span (span)_` -> `<em style=\"display:block;\" class=\"span\">(span) span (span)</em>`\n   PHP: `_{display:block}(span) span (span)_` -> `<em style=\"display:block;\">(span) span (span)</em>`\n\n  PHP and RC seem to mostly solve this by not parsing a final attr parens on spans if the\n  following character is a non-space. I've duplicated that: Class/ID is not matched on spans\n  if it is followed by `endToken` or <space>.\n\n  Lang is not matched here if it is followed by the end token. Theoretically I could limit the lang\n  attribute to /^\\[[a-z]{2+}(\\-[a-zA-Z0-9]+)*\\]/ because Textile is layered on top of HTML which\n  only accepts valid BCP 47 language tags, but who knows what atrocities are being preformed\n  out there in the real world. So this attempts to emulate the other libraries.\n*/\nfunction parseAttr ( input, element, endToken ) {\n  input = String( input );\n  if ( !input || element === 'notextile' ) {\n    return undefined;\n  }\n\n  let m;\n  const st = {};\n  const o = { 'style': st };\n  let remaining = input;\n\n  const isBlock = testBlock( element );\n  const isImg = element === 'img';\n  const isList = element === 'li';\n  const isPhrase = !isBlock && !isImg && element !== 'a';\n  const reAlign = ( isImg ) ? reAlignImg : reAlignBlock;\n\n  do {\n    if ( ( m = reStyles.exec( remaining ) ) ) {\n      m[1].split( ';' ).forEach( function ( p ) {\n        const d = p.match( reCSS );\n        if ( d ) { st[ d[1] ] = d[2]; }\n      });\n      remaining = remaining.slice( m[0].length );\n      continue;\n    }\n\n    if ( ( m = reLang.exec( remaining ) ) ) {\n      const rm = remaining.slice( m[0].length );\n      if ( ( !rm && isPhrase ) ||\n           ( endToken && endToken === rm.slice( 0, endToken.length ) ) ) {\n        m = null;\n      }\n      else {\n        o['lang'] = m[1];\n        remaining = remaining.slice( m[0].length );\n      }\n      continue;\n    }\n\n    if ( ( m = reClassid.exec( remaining ) ) ) {\n      const rm = remaining.slice( m[0].length );\n      if (\n          ( !rm && isPhrase ) ||\n          ( endToken && ( rm[0] === ' ' || endToken === rm.slice( 0, endToken.length ) ) )\n         ) {\n        m = null;\n      }\n      else {\n        const bits = m[1].split( '#' );\n        if ( bits[0] ) { o.class = bits[0]; }\n        if ( bits[1] ) { o.id = bits[1]; }\n        remaining = rm;\n      }\n      continue;\n    }\n\n    if ( isBlock || isList ) {\n      if ( ( m = rePaddingL.exec( remaining ) ) ) {\n        st[ 'padding-left' ] = `${ m[1].length }em`;\n        remaining = remaining.slice( m[0].length );\n        continue;\n      }\n      if ( ( m = rePaddingR.exec( remaining ) ) ) {\n        st[ 'padding-right' ] = `${ m[1].length }em`;\n        remaining = remaining.slice( m[0].length );\n        continue;\n      }\n    }\n\n    // only for blocks:\n    if ( isImg || isBlock || isList ) {\n      if ( ( m = reAlign.exec( remaining ) ) ) {\n        const align = pbaAlignLookup[ m[1] ];\n        if ( isImg ) {\n          o[ 'align' ] = align;\n        }\n        else {\n          st[ 'text-align' ] = align;\n        }\n        remaining = remaining.slice( m[0].length );\n        continue;\n      }\n    }\n\n    // only for table cells\n    if ( element === 'td' || element === 'tr' ) {\n      if ( ( m = reVAlign.exec( remaining ) ) ) {\n        st[ 'vertical-align' ] = pbaVAlignLookup[ m[1] ];\n        remaining = remaining.slice( m[0].length );\n        continue;\n      }\n    }\n    if ( element === 'td' ) {\n      if ( ( m = reColSpan.exec( remaining ) ) ) {\n        o[ 'colspan' ] = m[1];\n        remaining = remaining.slice( m[0].length );\n        continue;\n      }\n      if ( ( m = reRowSpan.exec( remaining ) ) ) {\n        o[ 'rowspan' ] = m[1];\n        remaining = remaining.slice( m[0].length );\n        continue;\n      }\n    }\n  }\n  while ( m );\n\n  // collapse styles\n  const s = [];\n  for ( const v in st ) {\n    s.push( `${ v }:${ st[v] }` );\n  }\n  if ( s.length ) {\n    o.style = s.join( ';' );\n  }\n  else {\n    delete o.style;\n  }\n\n  return ( remaining === input ) ? undefined : [ input.length - remaining.length, o ];\n}\n\nmodule.exports = {\n  copyAttr: copyAttr,\n  parseAttr: parseAttr\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/textile/attr.js\n **/","/* textile glyph parser */\n\nconst re = require( '../re' );\n\nconst reApostrophe = /(\\w)'(\\w)/g;\nconst reArrow = /([^\\-]|^)->/;\nconst reClosingDQuote = re.compile( /([^\\s\\[\\(])\"(?=$|\\s|[:punct:])/g );\nconst reClosingSQuote = re.compile( /([^\\s\\[\\(])'(?=$|\\s|[:punct:])/g );\nconst reCopyright = /(\\b ?|\\s|^)(?:\\(C\\)|\\[C\\])/gi;\nconst reDimsign = /([\\d\\.,]+['\"]? ?)x( ?)(?=[\\d\\.,]['\"]?)/g;\nconst reDoublePrime = re.compile( /(\\d*[\\.,]?\\d+)\"(?=\\s|$|[:punct:])/g );\nconst reEllipsis = /([^.]?)\\.{3}/g;\nconst reEmdash = /(^|[\\s\\w])--([\\s\\w]|$)/g;\nconst reEndash = / - /g;\nconst reOpenDQuote = /\"/g;\nconst reOpenSQuote = /'/g;\nconst reRegistered = /(\\b ?|\\s|^)(?:\\(R\\)|\\[R\\])/gi;\nconst reSinglePrime = re.compile( /(\\d*[\\.,]?\\d+)'(?=\\s|$|[:punct:])/g );\nconst reTrademark = /(\\b ?|\\s|^)(?:\\((?:TM|tm)\\)|\\[(?:TM|tm)\\])/g;\n\nexports.parseGlyph = function parseGlyph ( src ) {\n  if ( typeof src !== 'string' ) {\n    return src;\n  }\n  // NB: order is important here ...\n  return src\n    .replace( reArrow, '$1&#8594;' )\n    .replace( reDimsign, '$1&#215;$2' )\n    .replace( reEllipsis, '$1&#8230;' )\n    .replace( reEmdash, '$1&#8212;$2' )\n    .replace( reEndash, ' &#8211; ' )\n    .replace( reTrademark, '$1&#8482;' )\n    .replace( reRegistered, '$1&#174;' )\n    .replace( reCopyright, '$1&#169;' )\n    // double quotes\n    .replace( reDoublePrime, '$1&#8243;' )\n    .replace( reClosingDQuote, '$1&#8221;' )\n    .replace( reOpenDQuote, '&#8220;' )\n    // single quotes\n    .replace( reSinglePrime, '$1&#8242;' )\n    .replace( reApostrophe, '$1&#8217;$2' )\n    .replace( reClosingSQuote, '$1&#8217;' )\n    .replace( reOpenSQuote, '&#8216;' )\n    // fractions and degrees\n    .replace( /[\\(\\[]1\\/4[\\]\\)]/, '&#188;' )\n    .replace( /[\\(\\[]1\\/2[\\]\\)]/, '&#189;' )\n    .replace( /[\\(\\[]3\\/4[\\]\\)]/, '&#190;' )\n    .replace( /[\\(\\[]o[\\]\\)]/, '&#176;' )\n    .replace( /[\\(\\[]\\+\\/\\-[\\]\\)]/, '&#177;' );\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/textile/glyph.js\n **/","/* eslint camelcase: 0 */\n\nexports.txblocks = '(?:b[qc]|div|notextile|pre|h[1-6]|fn\\\\d+|p|###)';\n\nexports.ucaps = 'A-Z' +\n    // Latin extended Ã€-Ãž\n    '\\u00c0-\\u00d6\\u00d8-\\u00de' +\n    // Latin caps with embelishments and ligatures...\n    '\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f' +\n    '\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d' +\n    '\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc' +\n    '\\u01c4\\u01c7\\u01ca\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe' +\n    '\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e' +\n    '\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e' +\n    '\\u1e00\\u1e02\\u1e04\\u1e06\\u1e08\\u1e0a\\u1e0c\\u1e0e\\u1e10\\u1e12\\u1e14\\u1e16\\u1e18\\u1e1a\\u1e1c\\u1e1e\\u1e20\\u1e22\\u1e24\\u1e26\\u1e28\\u1e2a\\u1e2c\\u1e2e\\u1e30\\u1e32\\u1e34\\u1e36\\u1e38\\u1e3a\\u1e3c\\u1e3e\\u1e40' +\n    '\\u1e42\\u1e44\\u1e46\\u1e48\\u1e4a\\u1e4c\\u1e4e\\u1e50\\u1e52\\u1e54\\u1e56\\u1e58\\u1e5a\\u1e5c\\u1e5e\\u1e60\\u1e62\\u1e64\\u1e66\\u1e68\\u1e6a\\u1e6c\\u1e6e\\u1e70\\u1e72\\u1e74\\u1e76\\u1e78\\u1e7a\\u1e7c\\u1e7e' +\n    '\\u1e80\\u1e82\\u1e84\\u1e86\\u1e88\\u1e8a\\u1e8c\\u1e8e\\u1e90\\u1e92\\u1e94\\u1e9e\\u1ea0\\u1ea2\\u1ea4\\u1ea6\\u1ea8\\u1eaa\\u1eac\\u1eae\\u1eb0\\u1eb2\\u1eb4\\u1eb6\\u1eb8\\u1eba\\u1ebc\\u1ebe' +\n    '\\u1ec0\\u1ec2\\u1ec4\\u1ec6\\u1ec8\\u1eca\\u1ecc\\u1ece\\u1ed0\\u1ed2\\u1ed4\\u1ed6\\u1ed8\\u1eda\\u1edc\\u1ede\\u1ee0\\u1ee2\\u1ee4\\u1ee6\\u1ee8\\u1eea\\u1eec\\u1eee\\u1ef0\\u1ef2\\u1ef4\\u1ef6\\u1ef8\\u1efa\\u1efc\\u1efe' +\n    '\\u2c60\\u2c62-\\u2c64\\u2c67\\u2c69\\u2c6b\\u2c6d-\\u2c70\\u2c72\\u2c75\\u2c7e\\u2c7f' +\n    '\\ua722\\ua724\\ua726\\ua728\\ua72a\\ua72c\\ua72e\\ua732\\ua734\\ua736\\ua738\\ua73a\\ua73c\\ua73e' +\n    '\\ua740\\ua742\\ua744\\ua746\\ua748\\ua74a\\ua74c\\ua74e\\ua750\\ua752\\ua754\\ua756\\ua758\\ua75a\\ua75c\\ua75e\\ua760\\ua762\\ua764\\ua766\\ua768\\ua76a\\ua76c\\ua76e\\ua779\\ua77b\\ua77d\\ua77e' +\n    '\\ua780\\ua782\\ua784\\ua786\\ua78b\\ua78d\\ua790\\ua792\\ua7a0\\ua7a2\\ua7a4\\ua7a6\\ua7a8\\ua7aa';\n\nexports.txcite = ':((?:[^\\\\s()]|\\\\([^\\\\s()]+\\\\)|[()])+?)(?=[!-\\\\.:-@\\\\[\\\\\\\\\\\\]-`{-~]+(?:$|\\\\s)|$|\\\\s)';\n\nconst attr_class = exports.attr_class = '\\\\([^\\\\)]+\\\\)';\nconst attr_style = exports.attr_style = '\\\\{[^\\\\}]+\\\\}';\nconst attr_lang = exports.attr_lang = '\\\\[[^\\\\[\\\\]]+\\\\]';\nconst attr_align = exports.attr_align = '(?:<>|<|>|=)';\nconst attr_pad = exports.attr_pad = '[\\\\(\\\\)]+';\n\nconst txattr = exports.txattr = `(?:${ attr_class }|${ attr_style }|${ attr_lang }|${ attr_align }|${ attr_pad })*`;\n\nexports.txlisthd = `[\\\\t ]*[\\\\#\\\\*]*(\\\\*|\\\\#(?:_|\\\\d+)?)${ txattr }(?: \\\\S|\\\\.\\\\s*(?=\\\\S|\\\\n))`;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/textile/re_ext.js\n **/","/* textile list parser */\nconst ribbon = require( '../ribbon' );\nconst re = require( '../re' );\nconst merge = require( '../merge' );\n\nconst { parseAttr } = require( './attr' );\nconst { parsePhrase } = require( './phrase' );\n\nconst { txlisthd } = require( './re_ext' );\nre.pattern.txlisthd = txlisthd;\nconst reList = re.compile( /^((?:[:txlisthd:][^\\0]*?(?:\\r?\\n|$))+)(\\s*\\n|$)/, 's' );\nconst reItem = re.compile( /^([#\\*]+)([^\\0]+?)(\\n(?=[:txlisthd:])|$)/, 's' );\n\nfunction listPad ( n ) {\n  let s = '\\n';\n  while ( n-- ) {\n    s += '\\t';\n  }\n  return s;\n}\n\nfunction testList ( src ) {\n  return reList.exec( src );\n}\n\nfunction parseList ( src, options ) {\n  src = ribbon( src.replace( /(^|\\r?\\n)[\\t ]+/, '$1' ) );\n\n  const stack = [];\n  const currIndex = {};\n  const lastIndex = options._lst || {};\n  let itemIndex = 0;\n  let listAttr;\n  let m;\n  let n;\n  let s;\n\n  while ( ( m = reItem.exec( src ) ) ) {\n    const item = [ 'li' ];\n    const destLevel = m[1].length;\n    const type = ( m[1].substr( -1 ) === '#' ) ? 'ol' : 'ul';\n    let newLi = null;\n    let lst;\n    let par;\n    let pba;\n    let r;\n\n    // list starts and continuations\n    if ( ( n = /^(_|\\d+)/.exec( m[2] ) ) ) {\n      itemIndex = isFinite( n[1] )\n            ? parseInt( n[1], 10 )\n            : lastIndex[ destLevel ] || currIndex[ destLevel ] || 1;\n      m[2] = m[2].slice( n[1].length );\n    }\n\n    if ( ( pba = parseAttr( m[2], 'li' ) ) ) {\n      m[2] = m[2].slice( pba[0] );\n      pba = pba[1];\n    }\n\n    // list control\n    if ( /^\\.\\s*$/.test( m[2] ) ) {\n      listAttr = pba || {};\n      src.advance( m[0] );\n      continue;\n    }\n\n    // create nesting until we have correct level\n    while ( stack.length < destLevel ) {\n      // list always has an attribute object, this simplifies first-pba resolution\n      lst = [ type, {}, listPad( stack.length + 1 ), ( newLi = [ 'li' ] ) ];\n      par = stack[ stack.length - 1 ];\n      if ( par ) {\n        par.li.push( listPad( stack.length ) );\n        par.li.push( lst );\n      }\n      stack.push({\n        ul: lst,\n        li: newLi,\n        // count attributes's found per list\n        att: 0\n      });\n      currIndex[ stack.length ] = 1;\n    }\n\n    // remove nesting until we have correct level\n    while ( stack.length > destLevel ) {\n      r = stack.pop();\n      r.ul.push( listPad( stack.length ) );\n      // lists have a predictable structure - move pba from listitem to list\n      if ( r.att === 1 && !r.ul[3][1].substr ) {\n        merge( r.ul[1], r.ul[3].splice( 1, 1 )[ 0 ] );\n      }\n    }\n\n    // parent list\n    par = stack[ stack.length - 1 ];\n\n    if ( itemIndex ) {\n      par.ul[1].start = itemIndex;\n      currIndex[destLevel] = itemIndex;\n      // falsy prevents this from fireing until it is set again\n      itemIndex = 0;\n    }\n    if ( listAttr ) {\n      // \"more than 1\" prevent attribute transfers on list close\n      par.att = 9;\n      merge( par.ul[1], listAttr );\n      listAttr = null;\n    }\n\n    if ( !newLi ) {\n      par.ul.push( listPad( stack.length ), item );\n      par.li = item;\n    }\n    if ( pba ) {\n      par.li.push( pba );\n      par.att++;\n    }\n    Array.prototype.push.apply( par.li, parsePhrase( m[2].trim(), options ) );\n\n    src.advance( m[0] );\n    currIndex[destLevel] = ( currIndex[destLevel] || 0 ) + 1;\n  }\n\n  // remember indexes for continuations next time\n  options._lst = currIndex;\n\n  while ( stack.length ) {\n    s = stack.pop();\n    s.ul.push( listPad( stack.length ) );\n    // lists have a predictable structure - move pba from listitem to list\n    if ( s.att === 1 && !s.ul[3][1].substr ) {\n      merge( s.ul[1], s.ul[3].splice( 1, 1 )[0] );\n    }\n  }\n\n  return s.ul;\n}\n\nmodule.exports = {\n  testList: testList,\n  parseList: parseList\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/textile/list.js\n **/","/* definitions list parser */\n\nconst ribbon = require( '../ribbon' );\n\nconst reDeflist = /^((?:- (?:[^\\n]\\n?)+?)+:=(?: *\\n[^\\0]+?=:(?:\\n|$)|(?:[^\\0]+?(?:$|\\n(?=\\n|- )))))+/;\nconst reItem = /^((?:- (?:[^\\n]\\n?)+?)+):=( *\\n[^\\0]+?=:\\s*(?:\\n|$)|(?:[^\\0]+?(?:$|\\n(?=\\n|- ))))/;\n\nfunction testDefList ( src ) {\n  return reDeflist.exec( src );\n}\n\nfunction parseDefList ( src, options ) {\n  src = ribbon( src.trim() );\n\n  // late loading to get around the lack of non-circular-dependency support in RequireJS\n  const parsePhrase = require( './phrase' ).parsePhrase;\n  const parseFlow = require( './flow' ).parseFlow;\n\n  const deflist = [ 'dl', '\\n' ];\n  let terms;\n  let def;\n  let m;\n\n  while ( ( m = reItem.exec( src ) ) ) {\n    // add terms\n    terms = m[1].split( /(?:^|\\n)\\- / ).slice( 1 );\n    while ( terms.length ) {\n      deflist.push( '\\t'\n                , [ 'dt' ].concat( parsePhrase( terms.shift().trim(), options ) )\n                , '\\n'\n                );\n    }\n    // add definitions\n    def = m[2].trim();\n    deflist.push( '\\t'\n              , [ 'dd' ].concat(\n                  ( /=:$/.test( def ) )\n                    ? parseFlow( def.slice( 0, -2 ).trim(), options )\n                    : parsePhrase( def, options )\n                )\n              , '\\n'\n              );\n    src.advance( m[0] );\n  }\n  return deflist;\n}\n\nexports.testDefList = testDefList;\nexports.parseDefList = parseDefList;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/textile/deflist.js\n **/","/* textile table parser */\n\nconst re = require( '../re' );\nconst merge = require( '../merge' );\nconst ribbon = require( '../ribbon' );\n\nconst { parseAttr } = require( './attr' );\nconst { parsePhrase } = require( './phrase' );\nconst { reIndent } = require( '../jsonml' );\n\nconst { txattr } = require( './re_ext' );\nre.pattern.txattr = txattr;\n\nconst reTable = re.compile( /^((?:table[:txattr:]\\.(?:\\s(.+?))\\s*\\n)?(?:(?:[:txattr:]\\.[^\\n\\S]*)?\\|.*?\\|[^\\n\\S]*(?:\\n|$))+)([^\\n\\S]*\\n)?/, 's' );\nconst reHead = /^table(_?)([^\\n]*?)\\.(?:[ \\t](.+?))?\\s*\\n/;\nconst reRow = re.compile( /^(?:\\|([~\\^\\-][:txattr:])\\.\\s*\\n)?([:txattr:]\\.[^\\n\\S]*)?\\|(.*?)\\|[^\\n\\S]*(\\n|$)/, 's' );\nconst reCaption = /^\\|=([^\\n+]*)\\n/;\nconst reColgroup = /^\\|:([^\\n+]*)\\|[\\r\\t ]*\\n/;\nconst reRowgroup = /^\\|([\\^\\-~])([^\\n+]*)\\.[ \\t\\r]*\\n/;\n\nconst charToTag = {\n  '^': 'thead',\n  '~': 'tfoot',\n  '-': 'tbody'\n};\n\nfunction parseColgroup ( src ) {\n  const colgroup = [ 'colgroup', {} ];\n  src.split( '|' )\n      .forEach( function ( s, isCol ) {\n        const col = ( isCol ) ? {} : colgroup[ 1 ];\n        let d = s.trim();\n        let m;\n        if ( d ) {\n          if ( ( m = /^\\\\(\\d+)/.exec( d ) ) ) {\n            col.span = +m[ 1 ];\n            d = d.slice( m[ 0 ].length );\n          }\n          if ( ( m = parseAttr( d, 'col' ) ) ) {\n            merge( col, m[ 1 ] );\n            d = d.slice( m[ 0 ] );\n          }\n          if ( ( m = /\\b\\d+\\b/.exec( d ) ) ) {\n            col.width = +m[0];\n          }\n        }\n        if ( isCol ) {\n          colgroup.push( '\\n\\t\\t', [ 'col', col ] );\n        }\n      });\n  return colgroup.concat( [ '\\n\\t' ] );\n}\n\nfunction testTable ( src ) {\n  return reTable.exec( src );\n}\n\nfunction parseTable ( src, options ) {\n  src = ribbon( src.trim() );\n\n  const rowgroups = [];\n  let colgroup;\n  let caption;\n  const tAttr = {};\n  let tCurr;\n  let row;\n  let inner;\n  let pba;\n  let more;\n  let m;\n  let extended = 0;\n\n  const setRowGroup = function ( type, pba ) {\n    tCurr = [ type, pba || {} ];\n    rowgroups.push( tCurr );\n  };\n\n  if ( ( m = reHead.exec( src ) ) ) {\n    // parse and apply table attr\n    src.advance( m[0] );\n    pba = parseAttr( m[2], 'table' );\n    if ( pba ) {\n      merge( tAttr, pba[1] );\n    }\n    if ( m[3] ) {\n      tAttr.summary = m[3];\n    }\n  }\n\n  // caption\n  if ( ( m = reCaption.exec( src ) ) ) {\n    caption = [ 'caption' ];\n    if ( ( pba = parseAttr( m[1], 'caption' ) ) ) {\n      caption.push( pba[1] );\n      m[1] = m[1].slice( pba[0] );\n    }\n    if ( /\\./.test( m[1] ) ) { // mandatory \".\"\n      caption.push( m[1].slice( 1 ).replace( /\\|\\s*$/, '' ).trim() );\n      extended++;\n      src.advance( m[0] );\n    }\n    else {\n      caption = null;\n    }\n  }\n\n  do {\n    // colgroup\n    if ( ( m = reColgroup.exec( src ) ) ) {\n      colgroup = parseColgroup( m[1] );\n      extended++;\n    }\n    // \"rowgroup\" (tbody, thead, tfoot)\n    else if ( ( m = reRowgroup.exec( src ) ) ) {\n      // PHP allows any amount of these in any order\n      // and simply translates them straight through\n      // the same is done here.\n      const tag = charToTag[ m[1] ] || 'tbody';\n      pba = parseAttr( `${ m[2] } `, tag );\n      setRowGroup( tag, pba && pba[1] );\n      extended++;\n    }\n    // row\n    else if ( ( m = reRow.exec( src ) ) ) {\n      if ( !tCurr ) { setRowGroup( 'tbody' ); }\n\n      row = [ 'tr' ];\n\n      if ( m[2] && ( pba = parseAttr( m[2], 'tr' ) ) ) {\n        // FIXME: requires \"\\.\\s?\" -- else what ?\n        row.push( pba[1] );\n      }\n\n      tCurr.push( '\\n\\t\\t', row );\n      inner = ribbon( m[3] );\n\n      do {\n        inner.save();\n\n        // cell loop\n        const th = inner.startsWith( '_' );\n        let cell = [ th ? 'th' : 'td' ];\n        if ( th ) {\n          inner.advance( 1 );\n        }\n\n        pba = parseAttr( inner, 'td' );\n        if ( pba ) {\n          inner.advance( pba[0] );\n          cell.push( pba[1] ); // FIXME: don't do this if next text fails\n        }\n\n        if ( pba || th ) {\n          const p = /^\\.\\s*/.exec( inner );\n          if ( p ) {\n            inner.advance( p[0] );\n          }\n          else {\n            cell = [ 'td' ];\n            inner.load();\n          }\n        }\n\n        const mx = /^(==.*?==|[^\\|])*/.exec( inner );\n        cell = cell.concat( parsePhrase( mx[0], options ) );\n        row.push( '\\n\\t\\t\\t', cell );\n        more = inner.valueOf().charAt( mx[0].length ) === '|';\n        inner.advance( mx[0].length + 1 );\n      }\n      while ( more );\n\n      row.push( '\\n\\t\\t' );\n    }\n    //\n    if ( m ) {\n      src.advance( m[0] );\n    }\n  }\n  while ( m );\n\n  // assemble table\n  let table = [ 'table', tAttr ];\n  if ( extended ) {\n    if ( caption ) {\n      table.push( '\\n\\t', caption );\n    }\n    if ( colgroup ) {\n      table.push( '\\n\\t', colgroup );\n    }\n    rowgroups.forEach( function ( tbody ) {\n      table.push( '\\n\\t', tbody.concat( [ '\\n\\t' ] ) );\n    });\n  }\n  else {\n    table = table.concat( reIndent( rowgroups[0].slice( 2 ), -1 ) );\n  }\n\n  table.push( '\\n' );\n  return table;\n}\n\nmodule.exports = {\n  parseColgroup: parseColgroup,\n  parseTable: parseTable,\n  testTable: testTable\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/textile/table.js\n **/"],"sourceRoot":""}